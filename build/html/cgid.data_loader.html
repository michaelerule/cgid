

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cgid.data_loader module &mdash; cgid 0 documentation</title>
    
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="top" title="cgid 0 documentation" href="index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">cgid 0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul class="simple">
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/cgid.data_loader.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-cgid.data_loader">
<span id="cgid-data-loader-module"></span><h1>cgid.data_loader module<a class="headerlink" href="#module-cgid.data_loader" title="Permalink to this headline">¶</a></h1>
<p>The documentation for the CGID archive format is important
This archive contains extracted Cued Grasp with Instructed Delay (CGID) 
data for session RUS120521 area PMv. The variables are as follows:</p>
<dl class="docutils">
<dt>README:</dt>
<dd>This message</dd>
<dt>ByTrialLFP1KHz:</dt>
<dd>LFP data segmented by trial. This is a NCHANNELx1 cell array. Most areas
do not have all channels, and only channel numbers that were recorded 
are stored. Each channel is a NTRIALx7000 array. This is seven seconds of
LFP data at 1KHz starting at 1 second before &#8220;ObjectPresent&#8221;. Note: 
for rusty and spike, the StartTrial events occur about 1 second before
object presentation. For Gary, they occur about 15ms before object
presentation. ObjectPresent is the first consistent task event marker 
available for alignment. Trials that did not advance as far as object
presentation have been discarded.</dd>
<dt>ByTrialSpikesMS:</dt>
<dd>NUNITSxNTRIALS cell array. Each entry is a list of spike times for the 
corresponding cell and trial, in MS, and shifted so that StartTrial 
is time 0</dd>
<dt>UnsegmentedLFP1KHz:</dt>
<dd>This is the original LFP data. It is stored in a 96x1 cell array, where 
the index into the cell array corresponds to the LFP channel number. 
For most arrays, not all channels are available. Missing channels do 
not contiain data. Each channel entry is a NSAMPLESx1 sequence of LFP 
values sampled at 1KHz. These samples have been downsampled from 30KHz
in two stages. First, a 500Hz 4th order low-pass Butterworth filter is
used, and the LFPs are resampled at 2KHz. Second, Matlab Decimate is 
used to downsample them to 1KHz, which applies a 400Hz cutoff 
Chebyshev filter.</dd>
<dt>eventsByTrial: </dt>
<dd><p class="first">NTRIALSx12 trial summary information. 
The 1 column contains a flag indicating which trials are good. 
The 2 column contains a flag indicating object type. 0=KG 1=TC
The 3 column contains a flag indicating grip type. 0=Pre 1=Pow
the 4 column contains time (MS) that we start taking data for a trial
The remaining columns contain trial events, if available, in milliseconds,</p>
<blockquote class="last">
<div>and relative to object presentation. Missing events are denoted with
-1. Most error trials will have missing events. The event codes, in
order, are:
5       StartTrial
6       ObjectPresent 
7       GripCue 
8       GoCue 
9       StartMov 
10      Contact 
11      BeginLift 
12      EndLift
13      Reward</div></blockquote>
</dd>
<dt>spikeTimes: </dt>
<dd>1xNUNITS cell array of spike times in seconds. These are raw spike times
for the whole session and have not been segmented into individual trials.</dd>
<dt>unitIds:</dt>
<dd>1xNUNITS array of unit IDs. A unit can be identified as &#8220;unit [unitID] on
channel [channelID]&#8221;.</dd>
<dt>channelIds:</dt>
<dd>1xNUNITS array of channel IDs. A unit can be identified as &#8220;unit [unitID]
on channel [channelID]&#8221;.</dd>
<dt>waveForms: </dt>
<dd>Original waveform data from spike sorting. It is a 1xNUNITS cell array.
Each entry contains 48xNSPIKES matrix of spiking wavforms for that unit.</dd>
<dt>availableChannels:</dt>
<dd>a 96x1 array of flags. 1 means that a channel is present, 0 means that it
is no. For Gary and Costello, all even numbered channels were discarded,
though spikes were collected from all 96 channels. For Rusty and Spike, 
PMv has a full 96 channels. M1 and PMd share a single bank of 96 channels,
and are hooked up randomly. So a random 50% of M1 and PMd channels are not
assigned in Rusty and Spike datasets.</dd>
<dt>arrayChannelMap</dt>
<dd>An NxK mapping of the spatial locations of various channels. Positions with
-1 have no corresponding channels. Matrix is structures so that, when
displayed in standard format, recording wires exit to the right.</dd>
<dt>unitQuality</dt>
<dd>An NUNITSx1 list of unit quality codes.
0 : noise ( not a unit )
1 : poorly isolated ( multiunit or very noisy unit )
2 : isolated
3 : well isolated</dd>
</dl>
<p>There are variables containing the original CGID timestamps in seconds.
These are of the form [Object][Grip][Event]. There are two objects, key-grip
object &#8220;KG&#8221; and tapered-cylinder object &#8220;TC&#8221;. There are two grips, precision
grip &#8220;Pre&#8221; and power grip &#8220;Pow&#8221;. Each sucessful trial contains the events
StartTrial, ObjectPresent, GripCue, GoCue, StartMov, Contact, BeginLift,
EndLift, and Reward. Trials may end with an error before all events occur. 
Error related events include UndefinedGrip, WrongGrip, and Error. The events
ObjectPresent, GripCue, GoCue, StartMov, and Contact from completed trials 
only are copied over to events with &#8220;COMPLETE&#8221; appended to the name.</p>
<dl class="function">
<dt id="cgid.data_loader.get_all_pairs_ordered_as_channel_indecies">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_all_pairs_ordered_as_channel_indecies</code><span class="sig-paren">(</span><em>session</em>, <em>area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_all_pairs_ordered_as_channel_indecies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_all_pairs_ordered_as_channel_indecies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_array_map">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_array_map</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>removebad=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_array_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_array_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_available_channels">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_available_channels</code><span class="sig-paren">(</span><em>session</em>, <em>area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_available_channels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_available_channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the list of channels that are available for a sessiona and area</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_bad_channels">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_bad_channels</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>rule='liberal'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_bad_channels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_bad_channels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_bad_channels_and_trials">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_bad_channels_and_trials</code><span class="sig-paren">(</span><em>rule='liberal'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_bad_channels_and_trials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_bad_channels_and_trials" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_bad_trials">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_bad_trials</code><span class="sig-paren">(</span><em>session</em>, <em>area=None</em>, <em>rule='liberal'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_bad_trials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_bad_trials" title="Permalink to this definition">¶</a></dt>
<dd><p>This will mark a trial as bad if it is marked as bad for any of 
each of the three arrays</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_channel_as_data_index">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_channel_as_data_index</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>ch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_channel_as_data_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_channel_as_data_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Data are always packed in lists of 96 channels even when channels are
missing. Routines that return &#8220;all data&#8221; will remove missing channels.
It is necessary to convert channel index into indecies into the packed
data</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_data">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_data</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>trial</em>, <em>event</em>, <em>start</em>, <em>stop</em>, <em>lowf</em>, <em>highf</em>, <em>params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Need to abstract loading on neural data from the CGID arrays &#8211; this is 
getting too complicated.</p>
<p>Interface
request:</p>
<blockquote>
<div>session
area
trial
reference event
start time offset
stop time offset
filter start frequency
filter stop frequency
filter parameter codes</div></blockquote>
<dl class="docutils">
<dt>returns:</dt>
<dd>times: len nt trial times in ms for the data relative to reference marker
xys:   nelectrode-x-2 x,y positions of electrodes in array map space
data:  a nt-x-nelectrode filtered neural data snippit</dd>
</dl>
<p>To do this, we will need to 
&#8211; identify and locate relevant data archive
&#8211; import data archive
&#8211; locate relevant trial, possibly in the raw LFP if we need to use padding
&#8211; perform requested filtering on all channels
&#8211; generate time and space bases
&#8211; extract and pack data</p>
<p>Note: trial, event, start, stop are using the matlab convention, 1-index</p>
<p>Extracting the cortical locations of the electrodes is very very very 
tricky. We will use the same coordinate system as in the videos, where Y is
the distance from ventral to dorsal along central sulcus from M1 array in
mm. and X is the distance from caudal to rostral from M1 implant in mm</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_data_all_trials">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_data_all_trials</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>event</em>, <em>start</em>, <em>stop</em>, <em>lowf</em>, <em>highf</em>, <em>params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_data_all_trials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_data_all_trials" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_good_channels">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_good_channels</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>keepBad=False</em>, <em>rule='liberal'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_good_channels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_good_channels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_good_trials">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_good_trials</code><span class="sig-paren">(</span><em>session</em>, <em>rule='liberal'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_good_trials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_good_trials" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_session_times_ms">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_session_times_ms</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>tr</em>, <em>epoch=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_session_times_ms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_session_times_ms" title="Permalink to this definition">¶</a></dt>
<dd><p>Trial times are shifted so that the reported times are in session time.
This means they should agree with spike times relative to the session.</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_trial_epoch_in_session_ms">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_trial_epoch_in_session_ms</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>trial</em>, <em>epoch=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_trial_epoch_in_session_ms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_trial_epoch_in_session_ms" title="Permalink to this definition">¶</a></dt>
<dd><p>finds the trial times in ms for given start and stop range relative
to event.
epoch = event, start, stop</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_trial_event">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_trial_event</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>trial</em>, <em>event</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_trial_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_trial_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_trial_start_time">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_trial_start_time</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>tr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_trial_start_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_trial_start_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_trial_times_ms">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_trial_times_ms</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>trial</em>, <em>epoch=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_trial_times_ms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_trial_times_ms" title="Permalink to this definition">¶</a></dt>
<dd><p>finds the trial times in ms for given start and stop range relative
to event. These times are not shifted to align with session time,
they are aligned to object presentation.
epoch = event, start, stop</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_valid_trials">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_valid_trials</code><span class="sig-paren">(</span><em>session</em>, <em>area=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_valid_trials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_valid_trials" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.get_waveforms">
<code class="descclassname">cgid.data_loader.</code><code class="descname">get_waveforms</code><span class="sig-paren">(</span><em>session</em>, <em>area</em>, <em>unit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#get_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.get_waveforms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.good_trials">
<code class="descclassname">cgid.data_loader.</code><code class="descname">good_trials</code><span class="sig-paren">(</span><em>session</em>, <em>rule='liberal'</em><span class="sig-paren">)</span><a class="headerlink" href="#cgid.data_loader.good_trials" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.load_ppc_results_archives">
<code class="descclassname">cgid.data_loader.</code><code class="descname">load_ppc_results_archives</code><span class="sig-paren">(</span><em>directory='.'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#load_ppc_results_archives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.load_ppc_results_archives" title="Permalink to this definition">¶</a></dt>
<dd><p>Results are stored as keys and ppcs. There are 101 PPC values. 
The keys should have 13 variables. See the runppc function for details.
function [ppc,Pxx,F,nTapers] = runppc(</p>
<blockquote>
<div>session,area,unit,obj,grp,event,start,stop,chid,perm,permstrategy,jitter,window,bandWidth,subgroup
)</div></blockquote>
<p>It may be better to dump the existing PPC archives, update the matlab
code, and just run everything again.</p>
</dd></dl>

<dl class="function">
<dt id="cgid.data_loader.metaloaddata">
<code class="descclassname">cgid.data_loader.</code><code class="descname">metaloaddata</code><span class="sig-paren">(</span><em>session</em>, <em>area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#metaloaddata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.metaloaddata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.preload_cgid">
<code class="descclassname">cgid.data_loader.</code><code class="descname">preload_cgid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#preload_cgid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.preload_cgid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cgid.data_loader.readme">
<code class="descclassname">cgid.data_loader.</code><code class="descname">readme</code><span class="sig-paren">(</span><em>session</em>, <em>area</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cgid/data_loader.html#readme"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cgid.data_loader.readme" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">cgid 0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, mrule.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>